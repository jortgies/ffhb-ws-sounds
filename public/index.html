<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FFHB Flash Soundboard</title>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <button id="play" style="width: 200px; height: 120px; font-size: 100px;">
        &#9889;
    </button>
    <audio id="sound">
        <source src="sounds/flash.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <br/>
    <span class="connectedCount">0</span> <span class="connectedText">Users connected</span>.
    <br/>
    Full Audio <a href="https://www.youtube.com/watch?v=LfmrHTdXgK4">here</a>.
    <script>
        (function() {
            let socket = io();

            let sound = document.getElementById('sound');
            let play = document.getElementById('play');
            play.onclick = () => {
                socket.emit('message', 'play');
                if(sound.paused)
                    sound.play();
            };

            socket.on('play', (msg) => {
                if(msg === 'play') {
                    if(sound.paused)
                        sound.play();
                }
            });

            socket.on('connectedCount', (count) => {
                console.log(count);
                let countSpan = document.getElementsByClassName('connectedCount');
                countSpan[0].innerHTML = count;
                let textSpan = document.getElementsByClassName('connectedText');
                textSpan[0].innerHTML = count === 1 ? "User connected" : "Users connected";
            });
        })();
    </script>
</body>
</html>
